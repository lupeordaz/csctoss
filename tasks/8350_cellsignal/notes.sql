-- SOUP cellsignal report

select esn
      ,cellsignal
      ,from_unixtime(timestamp)
  from cellsignal
 where esn = 'A1000043888A18'
   and timestamp between unix_timestamp('2018-08-01') and unix_timestamp('2018-08-30 23:59:59')
   and cellsignal <> 'No Signal';
+----------------+----------------+--------------------------+
| esn            | cellsignal     | from_unixtime(timestamp) |
+----------------+----------------+--------------------------+
| A1000043888A18 | -100 dBm (51%) | 2018-08-01 03:45:54      |
| A1000043888A18 | -100 dBm (51%) | 2018-08-01 03:52:17      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-01 09:53:38      |
| A1000043888A18 | -95 dBm (61%)  | 2018-08-01 13:50:54      |
| A1000043888A18 | -96 dBm (58%)  | 2018-08-01 18:02:04      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-01 18:31:49      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-01 19:11:57      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-01 19:31:05      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-01 22:52:17      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-02 00:00:02      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-02 03:19:57      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-02 09:05:43      |
| A1000043888A18 | -92 dBm (67%)  | 2018-08-06 15:05:06      |
| A1000043888A18 | -92 dBm (67%)  | 2018-08-06 16:22:23      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-06 16:55:29      |
| A1000043888A18 | -92 dBm (67%)  | 2018-08-06 18:00:11      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-06 18:06:23      |
| A1000043888A18 | -93 dBm (64%)  | 2018-08-06 20:20:28      |
| A1000043888A18 | -92 dBm (67%)  | 2018-08-06 20:26:41      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-06 23:38:24      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-06 23:44:35      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-07 03:26:12      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-07 07:24:18      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-07 17:21:12      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-08 03:26:11      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-08 17:14:07      |
| A1000043888A18 | -93 dBm (64%)  | 2018-08-08 20:52:36      |
| A1000043888A18 | -92 dBm (67%)  | 2018-08-08 20:56:57      |
| A1000043888A18 | -95 dBm (61%)  | 2018-08-09 03:55:10      |
| A1000043888A18 | -96 dBm (58%)  | 2018-08-09 08:41:16      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-09 08:45:28      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-10 03:26:12      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-10 08:37:53      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-11 03:19:57      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-11 08:37:54      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-12 01:38:03      |
| A1000043888A18 | -93 dBm (64%)  | 2018-08-12 08:39:53      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-13 01:04:56      |
| A1000043888A18 | -92 dBm (67%)  | 2018-08-13 08:39:22      |
| A1000043888A18 | -92 dBm (67%)  | 2018-08-15 02:30:57      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-16 02:30:36      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-16 03:26:12      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-24 06:31:52      |
| A1000043888A18 | -95 dBm (61%)  | 2018-08-24 17:12:11      |
| A1000043888A18 | -95 dBm (61%)  | 2018-08-24 17:41:22      |
| A1000043888A18 | -93 dBm (64%)  | 2018-08-24 18:49:45      |
| A1000043888A18 | -93 dBm (64%)  | 2018-08-24 19:00:46      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-24 19:08:01      |
| A1000043888A18 | -95 dBm (61%)  | 2018-08-24 19:29:09      |
| A1000043888A18 | -95 dBm (61%)  | 2018-08-25 03:26:24      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-25 11:20:31      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-25 11:21:54      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-26 01:38:04      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-26 22:22:00      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-27 03:56:28      |
| A1000043888A18 | -96 dBm (58%)  | 2018-08-27 22:22:07      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-28 01:56:29      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-28 22:22:09      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-29 01:30:26      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-29 08:21:56      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-29 13:25:52      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-29 13:32:40      |
| A1000043888A18 | -98 dBm (54%)  | 2018-08-29 15:26:26      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-30 03:26:11      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-30 07:32:16      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-30 07:38:27      |
| A1000043888A18 | -84 dBm (83%)  | 2018-08-30 11:22:48      |
| A1000043888A18 | -75 dBm (100%) | 2018-08-30 11:26:49      |
+----------------+----------------+--------------------------+
68 rows in set (0.00 sec)

--

select esn
      ,cellsignal
      ,(locate("(",cellsignal)+1) as start
      ,(locate("%",cellsignal)-1) as end
      ,substring(cellsignal,1,3) as signal_strength
      ,substring(cellsignal,(locate("(",cellsignal)+1),(locate("%",cellsignal)-1)) as signal_pct
      ,from_unixtime(timestamp)
  from cellsignal
 where esn = 'A1000043888A18'
   and timestamp between unix_timestamp('2018-08-01')
   and unix_timestamp('2018-08-30 23:59:59')
   and cellsignal <> 'No Signal';

 +----------------+----------------+-------+-----+-----------------+------------+--------------------------+
| esn            | cellsignal     | start | end | signal_strength | signal_pct | from_unixtime(timestamp) |
+----------------+----------------+-------+-----+-----------------+------------+--------------------------+
| A1000043888A18 | -100 dBm (51%) |    11 |  12 | -10             | 51%)       | 2018-08-01 03:45:54      |
| A1000043888A18 | -100 dBm (51%) |    11 |  12 | -10             | 51%)       | 2018-08-01 03:52:17      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-01 09:53:38      |
| A1000043888A18 | -95 dBm (61%)  |    10 |  11 | -95             | 61%)       | 2018-08-01 13:50:54      |
| A1000043888A18 | -96 dBm (58%)  |    10 |  11 | -96             | 58%)       | 2018-08-01 18:02:04      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-01 18:31:49      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-01 19:11:57      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-01 19:31:05      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-01 22:52:17      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-02 00:00:02      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-02 03:19:57      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-02 09:05:43      |
| A1000043888A18 | -92 dBm (67%)  |    10 |  11 | -92             | 67%)       | 2018-08-06 15:05:06      |
| A1000043888A18 | -92 dBm (67%)  |    10 |  11 | -92             | 67%)       | 2018-08-06 16:22:23      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-06 16:55:29      |
| A1000043888A18 | -92 dBm (67%)  |    10 |  11 | -92             | 67%)       | 2018-08-06 18:00:11      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-06 18:06:23      |
| A1000043888A18 | -93 dBm (64%)  |    10 |  11 | -93             | 64%)       | 2018-08-06 20:20:28      |
| A1000043888A18 | -92 dBm (67%)  |    10 |  11 | -92             | 67%)       | 2018-08-06 20:26:41      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-06 23:38:24      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-06 23:44:35      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-07 03:26:12      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-07 07:24:18      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-07 17:21:12      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-08 03:26:11      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-08 17:14:07      |
| A1000043888A18 | -93 dBm (64%)  |    10 |  11 | -93             | 64%)       | 2018-08-08 20:52:36      |
| A1000043888A18 | -92 dBm (67%)  |    10 |  11 | -92             | 67%)       | 2018-08-08 20:56:57      |
| A1000043888A18 | -95 dBm (61%)  |    10 |  11 | -95             | 61%)       | 2018-08-09 03:55:10      |
| A1000043888A18 | -96 dBm (58%)  |    10 |  11 | -96             | 58%)       | 2018-08-09 08:41:16      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-09 08:45:28      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-10 03:26:12      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-10 08:37:53      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-11 03:19:57      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-11 08:37:54      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-12 01:38:03      |
| A1000043888A18 | -93 dBm (64%)  |    10 |  11 | -93             | 64%)       | 2018-08-12 08:39:53      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-13 01:04:56      |
| A1000043888A18 | -92 dBm (67%)  |    10 |  11 | -92             | 67%)       | 2018-08-13 08:39:22      |
| A1000043888A18 | -92 dBm (67%)  |    10 |  11 | -92             | 67%)       | 2018-08-15 02:30:57      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-16 02:30:36      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-16 03:26:12      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-24 06:31:52      |
| A1000043888A18 | -95 dBm (61%)  |    10 |  11 | -95             | 61%)       | 2018-08-24 17:12:11      |
| A1000043888A18 | -95 dBm (61%)  |    10 |  11 | -95             | 61%)       | 2018-08-24 17:41:22      |
| A1000043888A18 | -93 dBm (64%)  |    10 |  11 | -93             | 64%)       | 2018-08-24 18:49:45      |
| A1000043888A18 | -93 dBm (64%)  |    10 |  11 | -93             | 64%)       | 2018-08-24 19:00:46      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-24 19:08:01      |
| A1000043888A18 | -95 dBm (61%)  |    10 |  11 | -95             | 61%)       | 2018-08-24 19:29:09      |
| A1000043888A18 | -95 dBm (61%)  |    10 |  11 | -95             | 61%)       | 2018-08-25 03:26:24      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-25 11:20:31      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-25 11:21:54      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-26 01:38:04      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-26 22:22:00      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-27 03:56:28      |
| A1000043888A18 | -96 dBm (58%)  |    10 |  11 | -96             | 58%)       | 2018-08-27 22:22:07      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-28 01:56:29      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-28 22:22:09      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-29 01:30:26      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-29 08:21:56      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-29 13:25:52      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-29 13:32:40      |
| A1000043888A18 | -98 dBm (54%)  |    10 |  11 | -98             | 54%)       | 2018-08-29 15:26:26      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-30 03:26:11      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-30 07:32:16      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-30 07:38:27      |
| A1000043888A18 | -84 dBm (83%)  |    10 |  11 | -84             | 83%)       | 2018-08-30 11:22:48      |
| A1000043888A18 | -75 dBm (100%) |    10 |  12 | -75             | 100%)      | 2018-08-30 11:26:49      |
+----------------+----------------+-------+-----+-----------------+------------+--------------------------+
68 rows in set (0.00 sec)

  
select cellsignal
      ,(locate("(",cellsignal)+1) as start
      ,((locate("%",cellsignal)-1) - (locate("(",cellsignal)+1)) as end
      ,substring(cellsignal,1,3) as signal_strength
      ,substring(cellsignal,(locate("(",cellsignal)+1)
                           ,((locate("%",cellsignal)) - (locate("(",cellsignal)+1))) as signal_pct
  from cellsignal
 where esn = 'A1000043888A18'
   and timestamp between unix_timestamp('2018-08-01')
   and unix_timestamp('2018-08-30 23:59:59')
   and cellsignal <> 'No Signal';


select esn
      ,cellsignal       
      ,substring(cellsignal,1,(locate(" ",cellsignal) - 1)) as signal_strength       
      ,substring(cellsignal,(locate("(",cellsignal)+1)                            
                           ,((locate("%",cellsignal)) - (locate("(",cellsignal) + 1))) as signal_pct           
      ,from_unixtime(timestamp)   
  from cellsignal  
 where esn = 'A1000043888A18'    
   and timestamp between unix_timestamp('2018-07-01')    
   and unix_timestamp('2018-07-31 23:59:59')    
   and cellsignal <> 'No Signal';
+----------------+----------------+-----------------+------------+--------------------------+
| esn            | cellsignal     | signal_strength | signal_pct | from_unixtime(timestamp) |
+----------------+----------------+-----------------+------------+--------------------------+
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-01 01:38:03      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-01 01:48:00      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-01 01:59:30      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-01 02:11:00      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-03 16:24:31      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-03 16:35:01      |
| A1000043888A18 | -90 dBm (70%)  | -90             | 70         | 2018-07-03 20:48:00      |
| A1000043888A18 | -90 dBm (70%)  | -90             | 70         | 2018-07-03 20:59:24      |
| A1000043888A18 | -88 dBm (74%)  | -88             | 74         | 2018-07-03 21:14:37      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-04 01:38:19      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-04 01:48:36      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-04 02:00:25      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-04 02:12:06      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-04 11:27:47      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-04 16:28:09      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-04 16:32:24      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-05 02:11:55      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-05 06:44:39      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-05 06:44:42      |
| A1000043888A18 | -90 dBm (70%)  | -90             | 70         | 2018-07-05 12:35:31      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-05 12:47:04      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-05 13:02:11      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-06 01:05:14      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-06 01:17:04      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-06 01:34:39      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-06 09:18:56      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-06 12:34:40      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-06 15:40:07      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-06 15:40:51      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-07 02:21:22      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-07 02:34:43      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-07 02:42:52      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-07 02:56:18      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-07 03:54:09      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-08 01:38:08      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-08 03:54:48      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-08 04:12:56      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-08 14:04:36      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-08 14:08:57      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-09 03:26:14      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-09 09:06:33      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-09 10:15:50      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-09 10:19:56      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-10 03:26:29      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-10 10:12:27      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-10 12:41:57      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-10 18:20:28      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-10 18:26:49      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-11 03:54:59      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-11 18:27:53      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-12 01:05:16      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-12 05:15:41      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-12 05:16:24      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-12 07:23:25      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-12 07:27:30      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-12 13:18:11      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-12 13:24:46      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-13 03:26:29      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-13 13:16:58      |
| A1000043888A18 | -75 dBm (100%) | -75             | 100        | 2018-07-13 21:04:04      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-13 21:26:30      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-14 03:19:57      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-14 21:07:26      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-15 01:38:03      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-15 21:08:55      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-15 22:24:12      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-16 03:54:42      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-16 22:16:45      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-17 01:04:57      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-17 16:07:09      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-17 16:28:00      |
| A1000043888A18 | -96 dBm (58%)  | -96             | 58         | 2018-07-18 03:33:20      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-18 09:28:38      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-18 09:44:21      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-18 14:21:43      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-18 14:33:11      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-19 03:20:15      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-19 14:22:09      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-20 01:38:15      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-20 06:39:50      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-20 06:45:23      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-20 08:28:03      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-20 10:38:33      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-21 00:20:33      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-21 03:26:11      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-21 04:58:18      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-22 03:26:11      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-22 04:51:08      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-22 07:59:28      |
| A1000043888A18 | -96 dBm (58%)  | -96             | 58         | 2018-07-22 11:23:32      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-22 11:29:24      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-22 19:35:58      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-22 19:38:50      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-22 19:45:12      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-23 03:26:12      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-23 19:37:37      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-24 03:26:46      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-24 03:30:20      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-24 11:01:41      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-25 01:28:06      |
| A1000043888A18 | -92 dBm (67%)  | -92             | 67         | 2018-07-25 01:58:50      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-25 15:26:23      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-25 15:32:54      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-26 03:40:13      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-26 03:40:16      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-26 11:37:12      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-26 11:37:30      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-27 03:26:15      |
| A1000043888A18 | -90 dBm (70%)  | -90             | 70         | 2018-07-27 07:45:08      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 07:59:31      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 09:02:35      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 11:29:29      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-27 15:32:51      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 15:39:34      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 18:00:59      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 18:06:19      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 19:19:58      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-27 19:27:04      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-28 03:55:03      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-28 06:49:20      |
| A1000043888A18 | -84 dBm (83%)  | -84             | 83         | 2018-07-28 06:55:57      |
| A1000043888A18 | -93 dBm (64%)  | -93             | 64         | 2018-07-28 23:22:04      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-29 00:45:59      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-29 03:26:13      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-29 14:41:50      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-29 14:50:16      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-30 03:19:55      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-30 11:32:05      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-30 11:39:46      |
| A1000043888A18 | -95 dBm (61%)  | -95             | 61         | 2018-07-30 14:39:50      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-31 01:38:01      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-31 16:41:19      |
| A1000043888A18 | -98 dBm (54%)  | -98             | 54         | 2018-07-31 16:45:21      |
+----------------+----------------+-----------------+------------+--------------------------+
133 rows in set (0.00 sec)


select esn
      ,cellsignal       
      ,substring(cellsignal,1,(locate(" ",cellsignal) - 1)) as signal_strength       
      ,substring(cellsignal,(locate("(",cellsignal)+1)                            
                           ,((locate("%",cellsignal)) - (locate("(",cellsignal) + 1))) as signal_pct           
      ,from_unixtime(timestamp)   
  from cellsignal  
 where esn = 'A1000043888A18'    
   and timestamp between unix_timestamp('2018-07-01')    
   and unix_timestamp('2018-07-31 23:59:59')    
   and cellsignal <> 'No Signal'
  INTO '/tmp/cellsignal_strength.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n';


mysql> select esn
    ->       ,cellsignal
    ->       ,substring(cellsignal,1,(locate(" ",cellsignal) - 1)) as signal_strength
    ->       ,substring(cellsignal,(locate("(",cellsignal)+1)
    ->                            ,((locate("%",cellsignal)) - (locate("(",cellsignal) + 1))) as signal_pct
    ->       ,from_unixtime(timestamp)
    ->   from cellsignal
    ->  where timestamp = '1507225969';
+----------------+---------------+-----------------+------------+--------------------------+
| esn            | cellsignal    | signal_strength | signal_pct | from_unixtime(timestamp) |
+----------------+---------------+-----------------+------------+--------------------------+
| A1000043888A18 | -98 dBm (54%) | -98             | 54         | 2017-10-05 11:52:49      |
+----------------+---------------+-----------------+------------+--------------------------+
1 row in set (1.87 sec)

mysql> \e
    -> ;
+----------------+---------------+-----------------+------------+--------------------------+
| esn            | cellsignal    | signal_strength | signal_pct | from_unixtime(timestamp) |
+----------------+---------------+-----------------+------------+--------------------------+
| A1000043888A18 | -98 dBm (54%) | -98             | 54         | 2017-10-05 11:52:49      |
+----------------+---------------+-----------------+------------+--------------------------+
1 row in set (1.88 sec)

mysql> 
mysql> 
mysql> select count(*) from cellsignal;
+----------+
| count(*) |
+----------+
| 10758181 |
+----------+
1 row in set (0.00 sec)


mysql> describe cellsignal;
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
| esn        | varchar(255) | NO   | MUL | NULL    |       |
| cellsignal | varchar(255) | NO   |     | NULL    |       |
| timestamp  | int(11)      | NO   |     | NULL    |       |
+------------+--------------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql>



select esn
      ,cellsignal
      ,substring(cellsignal,1,(locate(" ",cellsignal) - 1)) as signal_strength
      ,substring(cellsignal,(locate("(",cellsignal)+1)
                           ,((locate("%",cellsignal)) - (locate("(",cellsignal) + 1))) as signal_pct
      ,from_unixtime(timestamp)
  from cellsignal
 where timestamp between unix_timestamp('2017-12-01')
   and unix_timestamp('2018-07-31 23:59:59')
 order by esn, from_unixtime(timestamp) limit 2000;




select esn
      ,cellsignal
      ,substring(cellsignal,1,(locate(" ",cellsignal) - 1)) as signal_strength
      ,substring(cellsignal,(locate("(",cellsignal)+1)
                           ,((locate("%",cellsignal)) - (locate("(",cellsignal) + 1))) as signal_pct
      ,from_unixtime(timestamp)
  from cellsignal
 where timestamp >= (SELECT CURRENT_DATE - INTERVAL 1 YEAR)





select esn
      ,cellsignal
      ,substring(cellsignal,1,(locate(" ",cellsignal) - 1)) as signal_strength
      ,substring(cellsignal,(locate("(",cellsignal)+1)
                           ,((locate("%",cellsignal)) - (locate("(",cellsignal) + 1))) as signal_pct
      ,from_unixtime(timestamp)
  from cellsignal
 where timestamp >= (SELECT CURRENT_DATE - INTERVAL 1 YEAR);


select from_unixtime(timestamp)
  from cellsignal
 WHERE timestamp >= DATE(NOW()) - INTERVAL 1 YEAR;

